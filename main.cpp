/*

												  ... .^^:.
										  .   ..~75GPPBGGGY!^.
											.^?5PPY?!7Y5PBBGPJ^
										   :JPBG?~:.^5YJ?JGGGP5!......
										  .YB#G7?7~:~Y??7~7GBGGPJ:...
										   J#B~:^^^^^:^^^:.~G#BBG~...
										   ~#?...:~~~^:::^^^5#B#P^..
											!7.:^?!~!7~^^~~~7?!J!...
											 ^~:^:::::^^^~~7!7!J:
										   .  :^::::::^~!?P#&&&P.
												~????YPB#&&&&&&#BGJ:
											   !&&P5B&&@@&&&&&#&&&@&5~  ..
	.^~?YJ??7^:..                     ..~YPP5!^B&&@&@@&&&@@@&#&&&&&J.:75BB5J!77:.      .
   .Y?~~^~!PPYJ?Y?~~^..:.      ..:^!JPB#&&&G^!&@&&&@&&&&&&&@##&&&&Y.!B##&#&&&#&#GY77J5PPPJ7^.......
   :::^^~~~7~:^~~!7J5GBBBGP!..^P#&&&&&&&&&#:.#@&&&&@&&&&&&&B#&&&&&:~#&#&&&&&&&&&&&&########BG5555Y7:.
 ..:~~~!!7!7?7??7!!!!75#&&###&&&&&&&&&&&&&#:.#@&@#&@&&&&&&B#&&&&@&:?&&&&&&&&&&&&&&@&#####BBBBBBBBBBP?:. .
 :^~!~~~!7!!?7!77777??J5#&&&@@&&&&&&&&&&&&&!.5@&@#B@&&&@@B#@&&&&@&:^&&&&&&&&&&&&&&&&&&&&&&&##BBBBBBBBP7. .
.~~~!~~~~!!~!J~~!777?JJYG&@@@@@@@&&&&&&&&&@5 ~@&@&P&@@@&G#@&@@@&&@J 5@&&@&&&&&&&&&&&&&&&&&&&&&####BBBBBY~..    .
.~7!!!!!!!!!!J7!777??JY5P#@@@@@@@@@@@@@@@@@&..#@&@&B#&&G#@@@&&&&&@#:^B@&@@&@@@@@&&&&&@@@@@@@@@@&&&&##BBBG5!.  ..
.!77777777777JY7??JJJ555PGB#&&@@@@@@@@@&&&#&J.J@@@@@&BP#@@@@&&&@@@@P:~#@@@@@@@@@@&&&@#7??777?5PGPG&&&#BBBBBY^.  .
.:777?????????PJJJJJJYPPP7...:^~~~~~^^::....7^:&&&&&&B~B&&&@@@@@@@&@Y^~#@@@@@@@@@@@&@@!..:::::^^^^7P&&#BBGGBGY^
. ~???JJJJJJJJG5JYYYYYPBY.                   :.5&&&&&&&&@&&&@@@@@@@@&7^!#@@@@@@@@@@@@@#....:::::::::!B&##BGGGBGJ.  .
. .~?J5YJYYYYY5BYY5Y55PY:..    ...           ..:&@@@&&@@@&&@@@@@@@@&&#7^7#@@@@@@@@@@&&@7   ....::::::^5&##BGGGGBY:.        ..
   .:!YYYYYYYYYBP5555?~....                   ..Y&@&@@@@@@@@@@@@@@@&@&#~^7&@@@@@@@@@@&@P.  .   ...:::::Y&#BGP5YYJ!:.   .   ..
  ....:^!?JJYYYP5?7!^.....                    ...!&&&@@@@@@@@@@@@@@@@@&#!^?&@@@@@@@@@@@#:. ........:::::7P5YJ?7!!~^...  .....
  ........:::^^^^:.......                    .....!&@@@&@@@@@@@@@@@@@@&&#~~Y@@@@@@@@@@@&!.............:::~?J777!~~^:.. ......
	.....................             . ... ... ...J&@@@@@@@@@@@@@@@@@@&@G:~5@@@@@@@@@@@?................^!?7!!!~~^::.. . ...
	 ..................   ..                     ...P@@@@&@@@@@@@@@@@@@&&@5:^B@@@@@@@@@@?...........  ...:^~!!!!!!~~^::......
			 ..                                  . .~PG#&@@@@@@@@@@@@@@@&&@?^~&@@@@@@@&@G.     .....  .....:^~!!!!!!~^:......
			...                .......             ..:JYJ&&@@@@@@@@@@@@@@@@B::5@@@@@@@@@&:     ..............:~!7!~~^^:......
							   .......              . .^!5P#&&&&@@@@@@@@@@@&YJG@@@@@@@@@#.    ............ ..:^~~~~^:..:.....
...                     ..............                 .~5Y5BPPGB#&&&&&&&&&&&55@&@@&&&&5.  .....................::::.........
::....                 ...............           .  .^!JYYYPGYYY555PPPPGGGGGPYJBGBBGGGP:    .............................. ..
::::....               ......................    ..~?JJJJJYY5YY555555555555P5555555PPPJ:. ................................ ..
:::::::.....           ......................     7????JJJYYYYYY55YYY5Y5555555555Y55YY5: ....................................
::::::::::...           .....................    .JJJJJJJJYYYYYYYYYYYYYYYYYYYYYYYYYYYY5: . .................. ...............
:::::::::::....    ..........................   .!YJJJJJJJJJJJJJJJJJJYYYYYYYYYYYYYYYYYY. . ..................................
::::::::::::::...   .......................   .:!J??JJJJJJJJJJJJJJJJJYYYYYYYYYYYYYYYY5Y   ...................................
:::::::::::::::::...  .......................:7?JJJJJJYYYYYJJJJYYYYYYYYYYYYYYYYYYYYYY5?   ...................................
:::::::::::::::::::......... ............. .~????JJJY55555YJYYYYYYYYYYYYJJJJJJJJJJYYYP~ .....................................
::::::::::::::::::::::.... ..     ....... .!??77???JJY5PPPPP55YYYYYYYYJJJJJ?JJJJJJJYY5: .....................................
::::::::::::::::::::::::..... ........... ~?7777???JJJJY55PG##G5YYJYJJJJJ????????JJYYY  .....................................
:::::::::::::::::::::::::::.... ........  ^77777??JJJYYY55PPB##BJ???J????????????JJY57  .....................................
:::::::::::::::::::::::::::::...    ..  .^77777?JJJYYY555PPGGB#5!?????????????????JJ5~  .....................................
:::::::::::::::::::::::::::::::.... ....~7777???JJYYYY555PPGGG!.:7????J??????????JJYY: ......................................
::::::::::::::::::::::::::::::::::......77777???JJYYY555PPGP7.   ~YJJYYJ????????JJJYJ .......................................
:::::::::::::::::::::::::::::::::::::..~?7777??JJJYYY555P57.     .JYYYYJJ??????JJJJ5! .......................................
::::::::::::::::::::::::::::::::::::::^77777???JJYYYYY5Y7:  . . . ~JJJJJ???????JJJJY:  ......................................
:::::::::::::::::::::::::::::::::::::^7777????JJ555YYJ~.   .  . . :?JJJ???????JJJJYJ  .......................................
...:::::::::::::::::::::::::::::::::^!777???JJYY5P5YJ.        ... .JJJ???????JJJJY5~   ......................................
   ..:::::::::::::::::::::::::::::::^7????JJJJY55PP57 ..      ..  .JJJ???????JJJJYY.   ......................................
..   ...::::::::::::::::::::::::::::7?JJJYYYYY55PPY?:...       .  :JJJ?????JJJJJY57 .........................................
......  ..::::::::::::::::::::::::::?YY555PPPPGBBB7...   .        7???????JJJYYYY5^ .........................................
......    ..:::::::::::::::::::::::::?555PPPPGGGGGPY:...          !7???JJJJJYYYYY57 .........................................
..............:::::::::::::::::::::::^?55PPPPPPPPPPPY^::............!J?JJYYYYYYY55Y!.........................................
::^^^^^^^^^^:^^^^^^^^^^^^^^^^^^^^^^^^^^755PPPPPPPPPPP5~::::::::::::.!JJJYYYY555555PY~::::::::::::::::::::::::::::::::::::::::
:::^^^:::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^:!YP5PPPPPPPPPP5^::::::::::::^?YYJYYY55555PPJ57:::::::::::::::::::::::::::::::::::::::
::::::::::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^::^?PPPPPPPPPPPPY^::::::::::::^7?JYY55555555J#G.::::::::::::::::::::::::::::::::::::::
:::^^^^^:^^^^^^^^^^^^::::^^^:::^^^^^^^:::::!5PPPPPPPPPPPJ:::::::::::::::~7?J55P555YG&&~::::::::::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::::::.^JPPPPPPPP5PP!:::::::::::::::::^GGPPPGB&&&5.:::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::75PPPPPPPPPP~.::::::::::::::.:!?P##&&&&&#~:::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::.:75PPPPPPPPG!.^!:::::::::..::..5&&&&&&&&5.::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::.~5PPPPPPPPPJ#P.:::::::::::::.Y&&&&&&&&#~.:::::::::::::::::::::::::::::::::::*/


/*
															   .
															. .:...
															   .::::......
															..:^^^~7???J?7~:.
														 .:^~?JYYYPPPPPP555YJ^...
														.:^!YPGPGGBBBBBBGGGPPY^...
														...7PGGGGGBBBBBBBBBBGG57:
												.....   . .JGGBBBBBBB########BG5:
											.^7YPGGGP5~. ..~PB&######&&&GG####BG~.
										  :JG&&&&&&&&#B7 .PY5B&&&&&&&#BJ7Y#&GPPY:.
										^5#&&&&&&&&&&#GP..?&&&&##&&&&BYJ7?P5!^^:.
									   7#&&&&&&&&&&&&&BG~.^#&&&#BGB#&&G7!!7!.:..
									 .Y&&&&&&&&&&&&&&&#G5.:P&&&&&&#BB##J77~. ..
									.P&&&&&&&&&&&&&&&&#GG::!&&&&&&&&&&&B5^
								   ^#&&&&&&&&&&&&&&&&&&GG?::B&&&&&&&&&&&#?.
								  7&&&&&&&&&&&&&&&&&&&&BG5::?&&&&&&&&&&&##P:
								 Y&&&&&@@@&&&&&&&&&&&&&#GG^:~#&&&&&&&&&&&#BG^
							   .P@&&&@@@@@&&&&&&&&&&&&&#GG!::G&&&&&&&&&&&&##B!
							  .P@&@@@@@@@&&&&&&&&&&&&&&&BBY::5&&&&&&&&&&&&&&BG!
							 .5@&&@@@@@@&&&&&&&&&&&&&&&&BBP::?&&&&&&&&&&&&&&&BG~
							 .B@&&&@@@@@&&&&&&&&&&&&&&&&#BB^~!:7P#&&&&&&&&&&&&BG.
							 .Y@&&&@@@@&&&&&&&&&&&&&&&&&#&PJYGG#55@&&&&&&&&&&&#B.
							 .^&@&@@@@@&&&&&&&&&&&&&&&&##Y:^Y&@&#5&&&&&&&&&&&&#B:
							 ..J@&@@@@&&&&&&&&&&&&&&&&&#P:^?&@&&&#P@&&&&&&&&@@#B^
							   :#@@@@&&&&&&&&&&&&&&&&&&G::7&@&&&&@B5@@&&&&&&&@&B:
								7@@@@&&&&&&&&&&&&&&&&&#!.!&@&&&&&&@P?&@&&&&&&@&J
								 ?&@@&&&&&&&&&&&&&&&&&J.^#@&&&&&&&@@5!&@@@@&@@#:
								  ^G&&&&&&&&&&&&&&@@@B..G@&&&&&&&&@@@Y^B@@@@@&#^
									G&&&&&&&&&&&&@&@&~.?@&&&&&&&&&@@@@J.P@@&@&~
									!&&&&&&&&&&&&&&@B!!#@&&&&&&&&&&&&@@?.P@@@J
									.GGB##&&&&&&&@@@PJ&@@@&&&&&&&&&&&&@&~:B@P.
									!57??JYPPGGBBBGG!?GGG#&&&&&&&&&&&&&&#!7J
								  .^??7??JJJJYYY55YYY55Y5PG##&&&&&&&&&&&&P^.
								 :?7777??JJJJJYYYYYYYYYYYYYY5PGB&&&@&Y:~~:.:.
							  . .PJ7??????JJJJJJJJJJJJ????JJJJJYPG7!~   ....  .
							  . ?P77??????JJJJJJJJJJJJJ?JJJJJJYYYPB:
							   .J777?????JJJJJJJJJJJJJJJJJJJJJJJ?J#J:
							   ~?7?????JJJJJJYYYYYYYYYYJYYYJJJJJ?JJY7 ...
							  ^77??????JJJJYYYYYY5555YYYYYYYY5PP5P5J?^  .                         ....
							 :777?????JJJJYYYYY555555555YYY5555YYYJ??J^                           ....
							:77777????JYYYY55555PPPPPP555555555YYJJ?77?!.                         ....
..                      .  .77??JJJJJJYY5555PPPGPJ7JGGPPPPP5555YJYYJJJJJ7.                       .....
::...    ......           .!7??JJJJJYY555PPPGPJ~..  ^PBGGGPPPPPP55YYJJ??J. .......... ................
:::::...   ....          .!77??JJJJYY555PPGP7:       .7GPPPP5555YYYJJJ???. ...........................
:::::::....         .   .777????JYYY55PPGG7:.  ...  .  ^GP55555YYYYJJJJJ?. ...........................
::::::::::...      ... .!77??JJJYYY5555G5~. ...... .  . ^PP55555YYYYJJJJ?7  ..........................
::::::::::::...    .. .!77???JJJYYY555GJ.     ....  ...  .5555555YYYYYJJJJ^ ..........................
:::::::::::::::....   ~77??JJJJYYY555G!        ...      . ^P555555YYYYYJJJ?. .........................
:::::::::::::::::... .?7???JJJJYY55PG7  .............   .  !GP55555YYYYJJJJ^ .........................
:::::::::::::::::::..~7777??JY5555GB!  .................... ^PPPP55Y5YYYJJJ~..........................
:::::::::::::::::::~7JJYYYYY55PPGBJ.  ...................... :GGPP55555YYJJ!  ........................
:::::::::::::::::::!???JYY5PPPPPP:  .......................   ^BB555P55YJJ??^ ........................
::::::::::::::::::^77?YJY55YYY55.  .........................   .7PGPPPPPPPYJJ:........................
:::::::::::::::::^!7?7????JY5P5: ..............................   7555555YYY5Y!.......................
::::::::::::::::^!7777JJ?JY55Y^..... ..........................   .7YJ??7???77~ ......................
::::::::::::::::~7777?7?Y55P5^::::... ..........................   :JYJJ??77??7. .....................
:::::::::::::::~!7777?JYYY55~:::::::...                     .... . .7JYJ??7777?~ .....................
.::::::^^^^^^^^!!!7??JJYY55!:^^^^^:::::.............................^JJJJ???777?:.....................
^^^^^^^^^^^^^^~7777??JJYY57^^^^^^^^::::::::::::::::::::::::::::::::::7JJJ???????!:::::::::::::::::::::
^^^^^^^^^^^^^^777??JJYYY5J^^^^^::::::::::::::::::::::::::::::::::::::!JJJJ??????7:::::::::::::::::::::
^^^^^^^^^^^:^!777??JJYYYY~^::::::::::::::::::::::::::::::::::::::::::~JJJJJJJ????^::::::::::::::::::::
::::::::::::^7777JYYY5Y57::::::::::::::::::::::::::::::::::::::::::::^?JJJJJJJJ??^::::::::::::::::::::
::::::::::::~777?YYY555J^:::::::::::::::::::::::::::::::::::::::::::::7JJJJJ??JJ?!::::::::::::::::::::
:::::::::::^!77JYYYYY5Y^:::::::::::::::::::::::::::::::::::::::::::::.!JJJJJ?????7::::::::::::::::::::
:::::::::::~!7?JYY555Y~^:::::::::::::::::::::::::::::::::::::::::::::.^?JJJJJ?J???::::::::::::::::::::
::::::::::^!7??JYYYYY!^::::::::::::::::::::::::::::::::::::::::::::::.:?JJJJJJ???J::::::::::::::::::::
::::::::::^!7?JJYYYY!:::.:.::::::.......................:::......::::..~?JJJ??JJJJ^.::::::::::::::::::
::::::::::!77JJYYY5?^::..................................::.......::::.:?JYJJ??JJ?~.::::::::..::::::::
::::::::.!GGB#B5!!~^::::................................................!?7~JP#5JP:..:::..............
:::::::::5G#&&&?~^..:::::::::..:............................................!&&&&@Y...................
:::::::.!GG####7~^:::::::::.................................................^####&#^..................
.......:5BBBBB#?~^:.........................................................^#BGGB&5..................
*/

//#include <QDir>
//#include <tuple>
//#include "TFile.h"
//#include "TDefine.h"
//#include "TTextCodec.h"
//#include "TTextFile.h"
//#include "TDir.h"
//#include "TSystem.h"
//#include <QProcess>
//
//
//int main()
//{
//	bool ret(false); 
//	
//	ret = TFile::Decompress("F:\\SoftwareDownload\\QQ\\test\\FileRecv.zip", "F:\\SoftwareDownload\\QQ\\test\\");
//	TFile::Compress("F:\\SoftwareDownload\\QQ", QStringList() << "F:\\SoftwareDownload\\QQ\\FileRecv");
//	ret = TFile::MoveFile("E:\\2022-myl\\chromedriver_win32", "E:\\2022-myl\\new\\");
//	TFile::EmptyRecycleBin("J:\\new");
//	TFile::DeleteFileToCrash("J:\\new");
//
//	QProcess p;
//	QStringList arguments;
//	arguments.append("RS-CELLInspectionUi.exe");
//	arguments.append("F:\\Data\\Test\\Update\\Update.zip");
//	arguments.append("F:\\Data\\Test\\Release");
//	ret = p.startDetached("E:\\Source\\AtomicUpdate\\AtomicUpdate\\x64\\Release\\AtomicUpdate.exe", arguments);
//
//
//	QFileInfoList lstSucc, lstFail;
//	ret = TDir::Copy("F:\\Data\\2022\\ZhongshanWaiGuan", "F:\\Data\\Test", true, lstSucc, lstFail);
//	RemoveDirBySize("F:\\Data\\Test");
//	//QFileInfoList lstFileInfos = TDir::GetFolderFileInfoList("F:\\Data\\2022\\TTest", QStringList() << "*.txt" << "*.lnk");
//	//QStringList lstFileName = TDir::GetFolderFileNameList("F:\\Data\\2022\\TTest", QStringList() << "*.txt" << "*.lnk");
//	QFileInfoList lstFileInfos = TDir::GetFolderAllFileInfoList("F:\\Data\\2022\\TTest", QStringList() << "*.*" /*<< "*.lnk"*/, true);
//
//	ret = TTextFile::WriteText("F:\\Data\\Test\\Zhongshan\\1.txt", "abc", "UTF-8");
//	QList<std::tuple<int, int, QString>> lstTuple;
//	lstTuple.append(std::make_tuple(1, 3, QString::fromUtf8("лглглг")));
//	lstTuple.append(std::make_tuple(1, 4, QString::fromUtf8("лллллл")));
//	lstTuple.append(std::make_tuple(3, 2, QString::fromUtf8("лллллл")));
//	ret = TTextFile::InsertText("F:\\Data\\Test\\Zhongshan\\1.txt", lstTuple);
//
//	ret = TTextFile::InsertText("F:\\Data\\Test\\Zhongshan\\1.txt", 3, 3, QString::fromUtf8("лглглг"));
//
//	ret = TFile::CopyFile("F:\\Data\\2022\\TTest\\1.txt", "F:\\Data\\2022\\To\\1\\1.csv");
//
//
//	QFileInfo fileInfo("F:\\Data\\2022\\TTest\\efeqd.txt");
//	ret = fileInfo.isFile();
//	ret = fileInfo.isSymLink();
//	QString strDriveName;
//	strDriveName = fileInfo.absolutePath();
//	strDriveName = fileInfo.suffix();
//	QFileInfoList lstFileInfo = QDir::drives();
//	
//	for (QFileInfo fileInfo : lstFileInfo)
//	{
//		strDriveName = fileInfo.fileName();
//		strDriveName = fileInfo.baseName();
//		strDriveName = fileInfo.absolutePath();
//	}
//	TTextCodec::GetCorrectUnicode("");
//
//	iCpuUsage = TSystem::GetProcessCpuUsage();
//
//	return 1;
//}








#include <Windows.h>
#include <iostream>
#include <processthreadsapi.h>
#include <QMap>
#include <QWidget>
#include "TSystem.h"
#include "TGlobalHotKey.h"
#include "TQtGui.h"
#include "TThreadSafeQueueCache.h"
#include <QApplication>

void SetThreadContextFun() {
	long long index(0);
	while (true)
	{
		index++;
	}
}
typedef void(*SetThreadContextFunPoint)();


int main(int argc, char* argv[])
{
	QFont font("Arial");
	QRect rect(0, 0, 30, 200);
	QString str2;
	//GetElidedText(font, "Hello World", 50, Qt::TextElideMode::ElideLeft, str2);
	//bool ret = GetHeightAdaptiveFont(30, font, "Arial");

	QString str = TSystem::GetProcName(58200);
	QList<QString> lstModuleName = TSystem::GetProcModuleNames(58200);
	QList<MODULEENTRY32> lstModules = TSystem::GetProcModules(58200);

	unsigned long long LowLimit(0), highLimit(0);
	GetCurrentThreadStackLimits(&LowLimit, &highLimit);
	QMap<unsigned long, QList<unsigned long>> mapProcessThreadIdList = TSystem::GetProcThreadIdByName("notepad++.exe");
	unsigned long iTid = mapProcessThreadIdList.first().last();
	HANDLE thandle = OpenThread(THREAD_GET_CONTEXT | THREAD_SET_CONTEXT, false, iTid);
	DWORD d1 = SuspendThread(thandle);
	CONTEXT context;
	context.ContextFlags = CONTEXT_CONTROL;
	BOOL iRet = GetThreadContext(thandle, &context);
	SetThreadContextFunPoint pContextFun = SetThreadContextFun;
	context.ContextFlags = CONTEXT_CONTROL;
	context.Rip = (DWORD64)pContextFun;
	iRet = SetThreadContext(thandle, &context);
	ResumeThread(thandle);

	DWORD dPid = GetCurrentProcessId();
	DWORD dTid = GetCurrentThreadId();
	//HANDLE phandle = GetCurrentProcess();
	//HANDLE thandle = GetCurrentThread();
	TSystem::GetProcIdByName("Thunder.exe");

	char pBuffer[BUFSIZ] = { 0 };
	int nRes = EnumSystemFirmwareTables('ACPI', pBuffer, BUFSIZ);
	nRes = GetSystemFirmwareTable('RSMB', 0x0000, NULL, 0);
	char *nData = new char[nRes];
	ZeroMemory(nData, nRes);
	nRes = GetSystemFirmwareTable('RSMB', 0x0000, nData, nRes);
	ULONGLONG TotalMemoryInKilobytes;
	bool bRet = GetPhysicallyInstalledSystemMemory(&TotalMemoryInKilobytes);

	TCHAR buffer[256] = TEXT("");
	TCHAR szDescription[8][32] = {
		TEXT("NetBIOS"),
		TEXT("DNS hostname"),
		TEXT("DNS domain"),
		TEXT("DNS fully-qualified"),
		TEXT("Physical NetBIOS"),
		TEXT("Physical DNS hostname"),
		TEXT("Physical DNS domain"),
		TEXT("Physical DNS fully-qualified") };
	int cnf = 0;
	DWORD dwSize = _countof(buffer);

	for (cnf = 0; cnf < ComputerNameMax; cnf++)
	{
		if (!GetComputerNameEx((COMPUTER_NAME_FORMAT)cnf, buffer, &dwSize))
		{
			std::cout << "GetComputerNameEx failed (%d)\n" << GetLastError();
			return 0;
		}
		else std::cout << szDescription[cnf] << ":" << buffer;

		dwSize = _countof(buffer);
		ZeroMemory(buffer, dwSize);
	}
	return 0;
}
